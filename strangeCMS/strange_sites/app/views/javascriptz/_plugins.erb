/**
 * This script adds background-position-x and background-position-y Css properties to jQuery.
 * Because FireFox fails to support these natively.
 * 
 * Usage:
 * 
 * this.$element.css
 *	({
 *		"background_position_x": 'left',
 *		"background_position_y": 'top'
 *	})
 * 
 * Copyright (c) 2011 Nikolay Kuchumov
 * Licensed under MIT (http://en.wikipedia.org/wiki/MIT_License)
 * 
 * @author Kuchumov Nikolay
 * @email kuchumovn@gmail.com
 * @github kuchumovn
 */

(function($)
{
	function get_background_position($element)
	{
		var position = $element.css('background-position')

		if (!position)
			position = 'auto'

		return position
	}

	function get_coordinates(position)
	{
		var coordinates = position.split(' ')

		if (coordinates.length != 2)
			return

		return coordinates	
	}

	function get_position(coordinates)
	{
		return coordinates.join(' ')
	}

	function get_coordinate(index, $element)
	{
		var position = get_background_position($element)

		if (position === 'auto')
		{
			return 'auto'
		}

		var coordinates = get_coordinates(position)

		if (!coordinates)
			return

		return coordinates[index - 1]
	}

	$.cssHooks['background_position_x'] = 
	{
		get: function(element, computed, extra) 
		{
			var x = get_coordinate(1, $element)

			if (!x)
				return

			return x
		},

		set: function(element, x) 
		{
			var $element = $(element)

			var y = get_coordinate(2, $element)

			if (!y)
				return

			$element.css('background-position', get_position([x, y]))
		}
	}

	$.cssHooks['background_position_y'] = 
	{
		get: function(element, computed, extra) 
		{
			var y = get_coordinate(2, $element)

			if (!y)
				return
		},

		set: function(element, y) 
		{
			var $element = $(element)

			var x = get_coordinate(1, $element)

			if (!x)
				return

			$element.css('background-position', get_position([x, y]))
		}
	}

	$.fx.step['background_position_x']  = function(fx) 
	{
		$.cssHooks['background_position_x'].set(fx.elem, fx.now + fx.unit);
	}

	$.fx.step['background_position_y']  = function(fx) 
	{
		$.cssHooks['background_position_y'].set(fx.elem, fx.now + fx.unit);
	}
})
(jQuery);

/* Copyright (c) 2008 Brian Beck (exogen@gmail.com)
 * MIT (http://www.opensource.org/licenses/mit-license.php) licensed.
 *
 * Angepasst durch Austin Strange (jquery 1.4+ kompatible)
 * Version: 1.3
*/

(function($) {
    $.extend({
        ahover: {
            version: 1.0,
            defaults: {
                toggleSpeed: 75,
                toggleEffect: 'both',
                hoverEffect: null,
                moveSpeed: 250,
                easing: 'swing',
                className: 'fineHoverBox'
            },
            effects: {
                'width': {width: 0},
                'height': {height: 0},
                'both': {width: 0, height: 0}
            }
        }
    });
    
    $.fn.extend({
        ahover: function(options) {
            var options = $.extend({}, $.ahover.defaults, options);
            var effect = (
                (typeof options.toggleEffect == 'string') ?
                $.ahover.effects[options.toggleEffect] : options.toggleEffect
            );
            var parent = this.parent();
            return this.hover(
                function(e) {
					var active_link = parent.find('.nav_aktiv');
					var active_link_bg = parent.find('.nav_aktiv').css('background');
					active_link.css('background', 'transparent');
                    var over = $(this);
                    var overSize = {
                        width: over.outerWidth(),
                        height: 11 // over.outerHeight()
                    };
                    var overOffset = over.offset();
                    var parentOffset = parent.offset();

                    var under = $('div.' + options.className, parent).stop();
                    var created = (under.length == 0);
                    if (created) {
                        under = $('<div>&nbsp;</div>')
                            .addClass(options.className)
                            .appendTo(parent).css(overSize);
                    }
                    
                    var underOffset = {
                        left: overOffset.left - parentOffset.left -
                            (under.outerWidth() - under.width()) / 2,
                      /*  top: overOffset.top - parentOffset.top -
                            (under.outerHeight() - under.height()) / 2,*/
						bottom: '0'
                    }

                    if (created) {
                        under.css(underOffset).css(effect).animate(overSize, {
                            queue: false,
                            duration: options.toggleSpeed,
                            easing: options.easing
                        });
                    }
                    else {
                        var underCSS = $.extend({}, overSize, underOffset);
                        under.animate(underCSS, {
                            queue: false,
                            duration: options.moveSpeed,
                            easing: options.easing
                        });
                    }
                    if ($.isFunction(options.hoverEffect)) {
                        under.queue(options.hoverEffect);
                    }
                },
                function(e) {
					var active_link = parent.find('.nav_aktiv');
					var active_link_bg = parent.find('.nav_aktiv').css('background');
					active_link.css('background', 'transparent');
                    $('div.' + options.className, parent).animate(effect, {
                        queue: false,
                        duration: options.toggleSpeed,
                        easing: options.easing,
                        complete: function() { 
							$(this).remove(); active_link.css('background',active_link_bg); 
							}
                    });
                }
            );
        }
    });
})(jQuery);